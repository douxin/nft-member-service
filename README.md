# NFT as Member Service
Build merchant member service with NFT.

## How to use
参照 `scripts/deploy-merchant.ts` 脚本，修改 `Merchant` 参数

## 场景
### 商户
1. 开通会员卡服务，设置开卡积分、消费可得积分比例、积分抵扣比例，会员升级规则等
2. 商家可以冻结和解冻会员服务，冻结后各项服务不可用

### 消费者
1. 在商家开通会员卡，链上表现为 mint 一个 NFT 和积分 token
2. 消费可以获得积分，可以使用积分抵扣金额。不同的会员等级，消费兑积分的比例，和积分可抵扣的比例，都是不同的
3. 消费到一定额度，可以升级到下一个会员等级

## 合约结构
- Merchant: 店铺主合约，在此合约内自动创建会员卡、积分，保存升级规则、积分兑换规则等
- Member: 会员卡合约
- Point: 积分合约

### 关于积分 Decimal
积分的 decimal 值设置为 `4`，原因是：
1. `元` 要转成 `分` 存储
2. 兑换比例是百分比，如 95 折是 95%，链上计算用整数，所以是乘上 `100`
3. 综合前两点，设置为 `4`，即 `10 ** 4`

如商家设置获得的积分为消费金额的 10%，若用户消费了 1000 元，则获得的积分为：
$$pointAmount = 1000 * 100 * 10$$